{{/* <!-- Meta --> */}}

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

{{- if hugo.IsProduction | or (eq site.Params.env "production") | and (ne .Params.robotsNoIndex true) }}
<meta name="robots" content="index, follow">
{{- else }}
<meta name="robots" content="noindex, nofollow">
{{- end }}

{{/* <!-- Title --> */}}
<title>
  {{ if .IsHome }}{{ else }}{{ if .Title }}{{ .Title }} | {{ end }}{{ end }}{{ site.Title }}
</title>

{{- if .IsHome -}}
  {{- with site.Params.keywords -}}
  <meta name="keywords" content="{{- range $i, $e := . }}{{ if $i }}, {{ end }}{{ $e }}{{ end }}">
  {{ end }}
{{- else -}}
  <meta name="keywords" content="{{ if .Params.keywords -}}
    {{- range $i, $e := .Params.keywords }}{{ if $i }}, {{ end }}{{ $e }}{{ end }} {{- else }}
    {{- range $i, $e := .Params.tags }}{{ if $i }}, {{ end }}{{ $e }}{{ end }} {{- end -}}">
{{- end -}}

<meta name="description" content="{{- with .Description }}{{ . }}{{- else }}{{- if or .IsPage .IsSection}}
    {{- .Summary | default (printf "%s - %s" .Title  site.Title) }}{{- else }}
    {{- with site.Params.description }}{{ . }}{{- end }}{{- end }}{{- end -}}">

<meta name="author" content="{{ (partial "author.html" . ) }}">

<link rel="canonical" href="{{ if .Params.canonicalURL -}} {{ trim .Params.canonicalURL " " }} {{- else -}} {{ .Permalink }} {{- end }}">
{{- if site.Params.analytics.google.SiteVerificationTag }}
<meta name="google-site-verification" content="{{ site.Params.analytics.google.SiteVerificationTag }}">
{{- end }}

{{- if site.Params.analytics.yandex.SiteVerificationTag }}
<meta name="yandex-verification" content="{{ site.Params.analytics.yandex.SiteVerificationTag }}">
{{- end }}

{{- if site.Params.analytics.bing.SiteVerificationTag }}
<meta name="msvalidate.01" content="{{ site.Params.analytics.bing.SiteVerificationTag }}">
{{- end }}

{{- if site.Params.analytics.naver.SiteVerificationTag }}
<meta name="naver-site-verification" content="{{ site.Params.analytics.naver.SiteVerificationTag }}">
{{- end }}

{{/* <!-- End Meta --> */}}

{{/* Styles */}}

{{/* includes */}}
{{- $includes := slice }}
{{- $includes = $includes | append (" " | resources.FromString "assets/css/includes-blank.css")}}

{{- if not (eq site.Params.assets.disableScrollBarStyle true) }}
    {{- $ScrollStyle := (resources.Get "css/includes/scroll-bar.css") }}
    {{- $includes = (append $ScrollStyle $includes) }}
{{- end }}

{{- $includes_all := $includes | resources.Concat "assets/css/includes.css" }}

{{- $theme_vars := (resources.Get "css/core/theme-vars.css") }}
{{- $reset := (resources.Get "css/core/reset.css") }}
{{- $media := (resources.Get "css/core/zmedia.css") }}
{{- $license_css := (resources.Get "css/core/license.css") }}
{{- $common := (resources.Match "css/common/*.css") | resources.Concat "assets/css/common.css" }}

{{/* include `an-old-hope` if hljs is on */}}
{{- $isHLJSdisabled := (site.Params.assets.disableHLJS | default false) }}
{{- $hljs := (cond ($isHLJSdisabled) (".chroma { background-color: unset !important;}" | resources.FromString "assets/css/hljs-blank.css") (resources.Get "css/hljs/an-old-hope.min.css")) }}

{{/* order is important */}}
{{- $core := (slice $theme_vars $reset $common $hljs $includes_all $media) | resources.Concat "assets/css/core.css" | resources.Minify }}
{{- $extended := (resources.Match "css/extended/*.css") | resources.Concat "assets/css/extended.css" | resources.Minify }}

{{/* bundle all required css */}}
{{/* Add extended css after theme style */ -}}
{{- $stylesheet := (slice $license_css $core $extended) | resources.Concat "assets/css/stylesheet.css"  }}

{{- if not site.Params.assets.disableFingerprinting }}
{{- $stylesheet := $stylesheet | fingerprint }}
<link crossorigin="anonymous" href="{{ $stylesheet.RelPermalink }}" integrity="{{ $stylesheet.Data.Integrity }}" rel="preload stylesheet" as="style">
{{- else }}
<link crossorigin="anonymous" href="{{ $stylesheet.RelPermalink }}" rel="preload stylesheet" as="style">
{{- end }}

{{/* Search */}}
{{- if (eq .Layout `search`) -}}
<link crossorigin="anonymous" rel="preload" as="fetch" href="../index.json">
{{- $fastsearch := resources.Get "js/fastsearch.js" | js.Build (dict "params" (dict "fuseOpts" site.Params.fuseOpts)) | resources.Minify }}
{{- $fusejs := resources.Get "js/fuse.basic.min.js" }}
{{- $license_js := resources.Get "js/license.js" }}
{{- if not site.Params.assets.disableFingerprinting }}
{{- $search := (slice $fusejs $license_js $fastsearch ) | resources.Concat "assets/js/search.js" | fingerprint }}
<script defer crossorigin="anonymous" src="{{ $search.RelPermalink }}" integrity="{{ $search.Data.Integrity }}"></script>
{{- else }}
{{- $search := (slice $fusejs $fastsearch ) | resources.Concat "assets/js/search.js" }}
<script defer crossorigin="anonymous" src="{{ $search.RelPermalink }}"></script>
{{- end }}
{{- end -}}

{{/* Highlight.js */}}
{{- $isHLJSdisabled := (site.Params.assets.disableHLJS | default .Params.disableHLJS ) }}
{{- if (and (eq .Kind "page") (ne .Layout "archives") (ne .Layout "search") (not $isHLJSdisabled)) }}
{{- if not site.Params.assets.disableFingerprinting }}
{{- $highlight := slice (resources.Get "js/highlight.min.js") | resources.Concat "assets/js/highlight.js" | fingerprint }}
<script defer crossorigin="anonymous" src="{{ $highlight.RelPermalink }}" integrity="{{ $highlight.Data.Integrity }}"
    onload="hljs.initHighlightingOnLoad();"></script>
{{- else }}
{{- $highlight := slice (resources.Get "js/highlight.min.js") | resources.Concat "assets/js/highlight.js" }}
<script defer crossorigin="anonymous" src="{{ $highlight.RelPermalink }}" onload="hljs.initHighlightingOnLoad();"></script>
{{- end }}
{{- end }}

{{/* Favicons */}}
<link rel="icon" href="{{ site.Params.assets.favicon | default "favicon.ico" | absURL }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ site.Params.assets.favicon16x16 | default "favicon-16x16.png" | absURL }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ site.Params.assets.favicon32x32 | default "favicon-32x32.png" | absURL }}">
<link rel="apple-touch-icon" href="{{ site.Params.assets.apple_touch_icon | default "apple-touch-icon.png" | absURL }}">
<link rel="mask-icon" href="{{ site.Params.assets.safari_pinned_tab | default "safari-pinned-tab.svg" | absURL }}">
<meta name="theme-color" content="{{ site.Params.assets.theme_color | default "#2e2e33" }}">
<meta name="msapplication-TileColor" content="{{ site.Params.assets.msapplication_TileColor | default "#2e2e33" }}">

{{/* RSS */}}
{{ range .AlternativeOutputFormats -}}
<link rel="{{ .Rel }}" type="{{ .MediaType.Type | html }}" href="{{ .Permalink | safeURL }}">
{{ end -}}
{{- range .AllTranslations -}}
<link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
{{ end -}}

{{/* <!-- Notice style --> */}}
<style type="text/css">
  .notice {
    --root-color:#444;
    --root-background:#eff;
    --title-color:#fff;
    --title-background:#7bd;
    --warning-title:#c33;
    --warning-content:#fee;
    --info-title:#fb7;
    --info-content:#fec;
    --note-title:#6be;
    --note-content:#e7f2fa;
    --tip-title:#5a5;
    --tip-content:#efe;
  }
  body.dark .notice {
    --root-color:#ddd;
    --root-background:#eff;
    --title-color:#fff;
    --title-background:#7bd;
    --warning-title:#800;
    --warning-content:#400;
    --info-title:#a50;
    --info-content:#420;
    --note-title:#069;
    --note-content:#023;
    --tip-title:#363;
    --tip-content:#121;
  }
  .notice {
    padding:18px;
    line-height:24px;
    margin-bottom:24px;
    border-radius:4px;
    color:var(--root-color);
    background:var(--root-background);
  }
  .notice p:last-child {
    margin-bottom:0;
  }
  .notice-title {
    /* margin:-18px -18px 12px; */
    padding:4px 18px;
    border-radius:4px 4px 0 0;
    font-weight:700;
    color:var(--title-color);
    /* background:var(--title-background); */
    color:var(--title-background);
  }
  .notice.warning .notice-title {
    /* background:var(--warning-title); */
    color:var(--warning-title);
  }
  .notice.warning {
    background:var(--warning-content);
  }
  .notice.info .notice-title {
    /* background:var(--info-title); */
    color:var(--info-title);
  }
  .notice.info {
    background:var(--info-content);
  }
  .notice.note .notice-title {
    /* background:var(--note-title); */
    color:var(--note-title);
  }
  .notice.note {
    background:var(--note-content);
  }
  .notice.tip .notice-title {
    /* background:var(--tip-title); */
    color:var(--tip-title);
  }
  .notice.tip {
    background:var(--tip-content);
  }
  .icon-notice {
    display:inline-flex;
    align-self:center;
    margin-right:8px;
  }
  .icon-notice img,.icon-notice svg {
    height:1em;
    width:1em;
    fill:currentColor;
  }
  .icon-notice img,.icon-notice.baseline svg {
    top:.125em;
    position:relative;
    margin-right: 5px;
  }
  
  
  details.notice > summary {
    list-style: none;
  }
  details.notice > summary::-webkit-details-marker {
    display: none;
  }
  details.notice[open] > summary:hover {
      cursor: zoom-out;
  }
  details.notice[open] > summary::-webkit-details-marker:hover {
      cursor: zoom-out;
  }
  details.notice > summary:hover {
      cursor: zoom-in;
  }
  details.notice > summary::-webkit-details-marker:hover {
      cursor: zoom-in;
  }
  
  
  /* aaasdasdadasd */
  
  details.notice {
      margin: 0 2px 20px 2px;
      border: 1px solid var(--border);
      background: var(--code-bg);
      border-radius: var(--radius);
      padding: 0.4em;
  }
  
  .dark details.notice {
      background: var(--entry);
  }
  
  details.notice details summary {
      cursor: zoom-in;
      margin-inline-start: 20px;
  }
  
  details.notice details[open] summary {
      cursor: zoom-out;
  }
  
  details.notice .details {
      display: inline;
      font-weight: 500;
  }
  
  details.notice .inner {
      margin: 20px;
      /* padding: 10px 20px; */
  }
  
  details.notice li ul {
      margin-inline-start: var(--gap);
  }
  
  details.notice summary:focus {
      outline: 0;
  }
</style>
{{/* <!-- End Notice style --> */}}

{{/* <!-- Top notification style --> */}}
<style type="text/css">
.top-alert {
  --root-color:#444;
  --root-background:#eff;
  --title-color:#fff;
  --title-background:#7bd;
  --warning-title:#c33;
  --warning-content:#fee;
  --info-title:#fb7;
  --info-content:#fec;
  --note-title:#6be;
  --note-content:#e7f2fa;
  --tip-title:#5a5;
  --tip-content:#efe;
}
body.dark .top-alert {
    --root-color:#ddd;
    --root-background:#eff;
    --title-color:#fff;
    --title-background:#7bd;
    --warning-title:#800;
    --warning-content:#400;
    --info-title:#a50;
    --info-content:#420;
    --note-title:#069;
    --note-content:#023;
    --tip-title:#363;
    --tip-content:#121;
  }
/* The alert message box */
.top-alert {
  padding: 15px;
  color: white;
  margin-bottom: 0.1rem;
  opacity: 1;
  transition: opacity 0.6s; /* 600ms to fade out */
}
.top-alert .top-alert-content {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  max-width: calc(var(--nav-width) + var(--gap) * 2);
  margin-inline-start: auto;
  margin-inline-end: auto;
  /* line-height: var(--header-height); */
}
.top-alert.warning {
  background-color:var(--warning-title);
}
.top-alert.info {
  background-color:var(--info-title);
}
.top-alert.note {
  background-color:var(--note-title);
}
.top-alert.tip {
  background-color:var(--tip-title);
}

/* The close button */
.top-alert .closebtn {
  margin-left: 15px;
  color: white;
  font-weight: bold;
  float: right;
  font-size: 22px;
  line-height: 20px;
  cursor: pointer;
  transition: 0.6s;
}

/* When moving the mouse over the close button */
.top-alert .closebtn:hover {
  color: black;
} 
</style>
{{/* <!-- End Top notification style --> */}}


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    {{- if (and (ne site.Params.defaultTheme "light") (ne site.Params.defaultTheme "dark")) }}
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
    {{- end }}
</noscript>

{{- partial "extend_head.html" . -}}

{{/* Misc */}}
{{- if hugo.IsProduction | or (eq site.Params.env "production") }}
{{- template "_internal/google_analytics.html" . }}
{{- template "partials/templates/opengraph.html" . }}
{{- template "partials/templates/twitter_cards.html" . }}
{{- template "partials/templates/schema_json.html" . }}
{{- end -}}
